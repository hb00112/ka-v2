<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta name="theme-color" content="#FFFFFF">
    <title>Kambeshwar Agencies</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
      <!-- SPLASH SCREEN (Add this at the very beginning) -->
    <div id="splash-screen" class="splash-container">
        <!-- Floating geometric shapes with distinct colors -->
        <div class="shape shape1"></div>
        <div class="shape shape2"></div>
        <div class="shape shape3"></div>
        <div class="shape shape4"></div>
        <div class="shape shape5"></div>
        <div class="shape shape6"></div>

        <!-- Center content -->
        <div class="center-content">
            <!-- Main logo -->
            <div class="main-logo">
                <div class="logo-circle">
                    <div class="icons-group">
                        <!-- Document/Bill icon -->
                        <div class="document"></div>
                        
                        <!-- Upload cloud -->
                        <div class="cloud"></div>
                        <div class="upload-arrow"></div>
                        
                        <!-- Money/Bill icon -->
                        <div class="money"></div>
                        
                        <!-- Folder icon -->
                        <div class="folder"></div>
                        
                        <!-- Floating particles -->
                        <div class="particle particle1"></div>
                        <div class="particle particle2"></div>
                        <div class="particle particle3"></div>
                        <div class="particle particle4"></div>
                        <div class="particle particle5"></div>
                        <div class="particle particle6"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Company name at bottom -->
        <div class="company-name">KAMBESHWAR AGENCIES</div>
    </div>

    <!-- YOUR EXISTING APP CONTENT (Initially Hidden) -->
    <div id="main-app" style="display: none;">


    <!-- Header -->
    <header class="header">
        <button class="back-btn" id="backBtn" style="display: none;" onclick="showHomePage()">
            <i class="fas fa-chevron-left"></i>
        </button>
        <h1 id="headerTitle">Kambeshwar Agencies</h1>
    </header>

    <!-- Home Page Content -->
    <!-- Home Page Content -->
<div id="homePage" class="page-content">
    <!-- Main Content -->
    <main class="main-content">
        <!-- Summary Cards (keep existing) -->
        <section class="summary-section">
            <div class="summary-grid">
                <div class="summary-card">
                    <div class="value empty" id="totalBills">--</div>
                    <div class="label">Total Bills<br>Uploaded</div>
                </div>
                <div class="summary-card">
                    <div class="value empty" id="totalAmount">--</div>
                    <div class="label">Total<br>Amount</div>
                </div>
                <div class="summary-card">
                    <div class="value empty" id="partiesRegistered">--</div>
                    <div class="label">Parties<br>Registered</div>
                </div>
            </div>
        </section>

        <!-- Target Analytics Section -->
        <section class="analytics-section">
            <div id="analyticsContainer"></div>
        </section>
    </main>
</div>

    <!-- Bills Page Content -->
    <div id="billsPage" class="page-content" style="display: none;">
        <!-- Main Content -->
        <main class="main-content">
            <!-- Quick Buttons Section -->
            <section class="quick-buttons-section">
                <h2 class="section-title">Quick Buttons</h2>
                <div class="quick-buttons-grid">
                    <button class="quick-btn" onclick="openManualEntryModal()">
                        <i class="fas fa-plus"></i>
                        <span>Upload Bill</span>
                    </button>
                    <button class="quick-btn" onclick="viewAllBills()">
                        <i class="fas fa-list"></i>
                        <span>View All Bills</span>
                    </button>
                    <button class="quick-btn" onclick="generateReport()">
                        <i class="fas fa-chart-bar"></i>
                        <span>Generate Report</span>
                    </button>
                    <button class="quick-btn" onclick="exportData()">
                        <i class="fas fa-download"></i>
                        <span>Export Data</span>
                    </button>
                </div>
            </section>

            <!-- Bills Table Section -->
            <section class="bills-table-section">
                <h2 class="section-title">Recent Bills</h2>
                <div class="table-container" id="billsTableContainer">
                    <div class="table-header">
                        <div>Date</div>
                        <div>I No.</div>
                        <div>Party Name</div>
                        <div>Amount</div>
                        <div></div>
                    </div>
                    <div id="billsTableBody">
                        <div class="empty-state">
                            <i class="fas fa-file-invoice"></i>
                            <h3>No Bills Uploaded</h3>
                            <p>Upload your first bill to get started</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Ledger Page Content -->
    <div id="ledgerPage" class="page-content" style="display: none;">
        <!-- Content will be injected by ledger.js -->
    </div>

    <!-- Profile Page Content -->
    <div id="profilePage" class="page-content" style="display: none;">
        <!-- Content will be injected by profile.js -->
    </div>

    <!-- Footer Navigation - MOVED OUTSIDE OF PAGE CONTENT -->
    <nav class="footer-nav">
        <a href="#" class="nav-item active" onclick="showHomePage()">
            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="28" height="28" viewBox="0 0 48 48">
                <path d="M 23.951172 4 A 1.50015 1.50015 0 0 0 23.072266 4.3222656 L 8.859375 15.519531 C 7.0554772 16.941163 6 19.113506 6 21.410156 L 6 40.5 C 6 41.863594 7.1364058 43 8.5 43 L 18.5 43 C 19.863594 43 21 41.863594 21 40.5 L 21 30.5 C 21 30.204955 21.204955 30 21.5 30 L 26.5 30 C 26.795045 30 27 30.204955 27 30.5 L 27 40.5 C 27 41.863594 28.136406 43 29.5 43 L 39.5 43 C 40.863594 43 42 41.863594 42 40.5 L 42 21.410156 C 42 19.113506 40.944523 16.941163 39.140625 15.519531 L 24.927734 4.3222656 A 1.50015 1.50015 0 0 0 23.951172 4 z M 24 7.4101562 L 37.285156 17.876953 C 38.369258 18.731322 39 20.030807 39 21.410156 L 39 40 L 30 40 L 30 30.5 C 30 28.585045 28.414955 27 26.5 27 L 21.5 27 C 19.585045 27 18 28.585045 18 30.5 L 18 40 L 9 40 L 9 21.410156 C 9 20.030807 9.6307412 18.731322 10.714844 17.876953 L 24 7.4101562 z"></path>
            </svg>
        </a>
        <a href="#" class="nav-item" onclick="showBillsPage()">
            <svg width="31px" height="31px" viewBox="0 0 24 24" fill="#616161" xmlns="http://www.w3.org/2000/svg">
                <path d="M12.75 16H11.25V13.75H9V12.25H11.25V10H12.75V12.25H15V13.75H12.75V16Z"></path>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M15.1571 3H6.63636C5.73262 3 5 3.73262 5 4.63636V19.3636C5 20.2674 5.73262 21 6.63636 21H18.0909C18.9946 21 19.7273 20.2674 19.7273 19.3636V7.57019L15.1571 3ZM6.63636 4.63636H13.1818V7.90909C13.1818 8.81283 13.9144 9.54545 14.8182 9.54545H18.0909V19.3636H6.63636V4.63636ZM14.8182 7.90909V4.97527L17.752 7.90909H14.8182Z"></path>
            </svg>
        </a>
        <a href="#" class="nav-item" onclick="showLedgerPage()">
            <svg width="31px" height="31px" viewBox="0 0 32 32" fill="#616161" xmlns="http://www.w3.org/2000/svg">
                <path d="M 3 6 L 3 25 L 13 25 C 14.101563 25 15 25.898438 15 27 L 17 27 C 17 25.898438 17.898438 25 19 25 L 29 25 L 29 6 L 19 6 C 17.808594 6 16.734375 6.527344 16 7.359375 C 15.265625 6.527344 14.191406 6 13 6 Z M 5 8 L 13 8 C 14.101563 8 15 8.898438 15 10 L 17 10 C 17 8.898438 17.898438 8 19 8 L 27 8 L 27 23 L 19 23 C 17.808594 23 16.734375 23.527344 16 24.359375 C 15.265625 23.527344 14.191406 23 13 23 L 5 23 Z M 15 12 L 15 14 L 17 14 L 17 12 Z M 15 16 L 15 18 L 17 18 L 17 16 Z M 15 20 L 15 22 L 17 22 L 17 20 Z"/>
            </svg>
        </a>
        <a href="#" class="nav-item" onclick="showProfilePage()">
            <svg fill="#616161" width="28px" height="28px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M12 2.5a5.5 5.5 0 00-3.096 10.047 9.005 9.005 0 00-5.9 8.18.75.75 0 001.5.045 7.5 7.5 0 0114.993 0 .75.75 0 101.499-.044 9.005 9.005 0 00-5.9-8.181A5.5 5.5 0 0012 2.5zM8 8a4 4 0 118 0 4 4 0 01-8 0z"/>
            </svg>
        </a>
    </nav>

    <!-- Rest of your modals and scripts remain the same -->
    <!-- Manual Entry Form Modal -->
<div id="manualEntryModal" class="modal-overlay">
    <div class="modal">
        <div class="modal-header">
            <h2>Manual Entry</h2>
            <button class="close-btn" onclick="closeModal('manualEntryModal')">×</button>
        </div>
        <div class="modal-body">
            <div class="entry-mode-toggle-container">
                <button type="button" id="entryModeToggle" class="mode-toggle-btn" onclick="toggleEntryMode()">
                    <i class="fas fa-exchange-alt"></i> Switch to CN
                </button>
            </div>
            <form id="billForm" onsubmit="submitBillForm(event)">
                <div class="form-group">
                    <label id="invoiceLabel">Invoice Number*</label>
                    <input type="text" id="invoiceNo" required>
                </div>
                <div class="form-group">
                    <label id="dateLabel">Invoice Date*</label>
                    <input type="date" id="invoiceDate" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Party Name</label>
                    <select class="form-select" id="partyName" required>
                        <option value="">Select Party</option>
                        <option value="ADVAIT ENTERPRISES">ADVAIT ENTERPRISES</option>
                        <option value="ANISHKA LINGERIES">ANISHKA LINGERIES</option>
                        <option value="AVNI TRADERS">AVNI TRADERS</option>
                        <option value="BARON">BARON</option>
                        <option value="BHARNE FASHION AND LIFESTYLE">BHARNE FASHION AND LIFESTYLE</option>
                        <option value="CALLICAS">CALLICAS</option>
                        <option value="CARO CENTRE">CARO CENTRE</option>
                        <option value="CHIRAG BAG HOUSE">CHIRAG BAG HOUSE</option>
                        <option value="DEEPAK STORE">DEEPAK STORE</option>
                        <option value="FALARI ENTERPRISES">FALARI ENTERPRISES</option>
                        <option value="FEELINGS WOMENS INNERWEAR">FEELINGS WOMENS INNERWEAR</option>
                        <option value="FEMILINE COLLECTIONS">FEMILINE COLLECTIONS</option>
                        <option value="J.V. MANERKAR">J.V. MANERKAR</option>
                        <option value="CASH">CASH</option>
                          <option value="ISL MULTISERVICE LLP">ISL MULTISERVICE LLP</option>
                        <option value="KANEKAR CORNER UNIT ONE">KANEKAR CORNER UNIT ONE</option>
                        <option value="LOVELY COLLECTION">LOVELY COLLECTION</option>
                        <option value="MAHABALESHWAR S DANGUI & CO.">MAHABALESHWAR S DANGUI & CO.</option>
                        <option value="MAHABALESHWAR S DANGUI AND SONS">MAHABALESHWAR S DANGUI AND SONS</option>
                        <option value="MANISH COSMETIC GIFT TOYS ALL ONE">MANISH COSMETIC GIFT TOYS ALL ONE</option>
                        <option value="PUJA  S">PUJA  S</option>
                        <option value="ROOP DARPAN">ROOP DARPAN</option>
                        <option value="SHETYE ENTERPRISES">SHETYE ENTERPRISES</option>
                        <option value="SIDDHI STORES">SIDDHI STORES</option>
                        <option value="SIDDHIVINAYAK ENTERPRISES">SIDDHIVINAYAK ENTERPRISES</option>
                        <option value="SUDHIR TRADER">SUDHIR TRADERS</option>
                        <option value="POSHAK RETAIL">POSHAK RETAIL</option>
                        <option value="ULTIMATE CHOICE">ULTIMATE CHOICE</option>
                         <option value="UNIQUE LIFESTYLE BICHOLIM">UNIQUE LIFESTYLE BICHOLIM</option>
                        <option value="YASH MARKETING">YASH MARKETING</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Amount (₹)</label>
                    <input type="number" class="form-input" id="amount" placeholder="Enter amount" step="0.01" required>
                </div>
                
                <!-- Photo Section -->
                <div class="photo-section">
                    <div class="photo-section-title">
                        <i class="fas fa-camera"></i>
                        Bill Photo (Optional)
                    </div>
                    
                    <div class="camera-container">
                        <!-- Camera Button -->
                        <button type="button" class="camera-btn disabled" id="cameraBtn" onclick="openCamera()" disabled>
                            <i class="fas fa-camera"></i>
                            Take Photo
                        </button>
                        
                        <!-- Hidden File Input -->
                        <input type="file" id="cameraInput" accept="image/*" capture="environment">
                        
                        <!-- Photo Preview -->
                        <div class="photo-preview" id="photoPreview">
                            <img id="previewImg" class="preview-image" alt="Bill Preview">
                            <button type="button" class="retake-btn" id="retakeBtn" onclick="retakePhoto()">
                                <i class="fas fa-redo"></i>
                                Retake Photo
                            </button>
                        </div>
                    </div>
                    
                    <div class="text-muted mt-2">
                        Fill all details above to enable photo capture
                    </div>
                </div>
                
                <button type="submit" class="submit-btn" id="submitBtn">
                    Submit
                </button>
            </form>
        </div>
    </div>
</div>

<!-- Bill Details Modal (Updated to show image) -->
<div class="modal-overlay" id="billDetailsModal">
    <div class="form-modal">
        <div class="form-header">
            <div class="form-title">Bill Details</div>
            <button class="close-btn" onclick="closeModal('billDetailsModal')">Close</button>
        </div>
        <div class="form-content">
            <div class="detail-group">
                <label class="form-label">Party Name</label>
                <div class="detail-value" id="detailPartyName">--</div>
            </div>
            
            <div class="detail-group">
                <label class="form-label">Invoice No.</label>
                <div class="detail-value" id="detailInvoiceNo">--</div>
            </div>
            
            <div class="detail-group">
                <label class="form-label">Date</label>
                <div class="detail-value" id="detailDate">--</div>
            </div>
            
            <div class="detail-group">
                <label class="form-label">Amount</label>
                <div class="detail-value" id="detailAmount">₹0</div>
            </div>
            
            <div class="detail-group">
                <label class="form-label">Ledger Balance</label>
                <div class="detail-value" id="detailLedgerBalance">₹0</div>
            </div>
            
            <!-- Bill Image Container -->
            <div id="billImageContainer"></div>
            
         <!----  <div class="detail-actions" style="margin-top: 20px; display: flex; gap: 10px;">
                <button class="submit-btn" style="background: #dc3545; flex: 1;" onclick="confirmDeleteBill()">
                    <i class="fas fa-trash"></i>
                    Delete Bill
                </button>
            </div> -->
        </div>
    </div>

                
                <div class="bill-details-buttons">
                    <button class="bill-action-btn view-ledger-btn" onclick="viewLedger()">
                        <i class="fas fa-book"></i>
                        View Ledger
                    </button>
                    <button class="bill-action-btn delete-btn" onclick="confirmDeleteBill()">
                        <i class="fas fa-trash"></i>
                        Delete Bill
                    </button>
                    <button class="bill-action-btn cancel-btn" onclick="closeModal('billDetailsModal')">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteConfirmModal">
        <div class="confirm-modal">
            <div class="confirm-content">
                <div class="confirm-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3>Delete Bill?</h3>
                <p>Are you sure you want to delete this bill? This action cannot be undone.</p>
                <div class="confirm-buttons">
                    <button class="confirm-btn delete" onclick="deleteBill()">Delete</button>
                    <button class="confirm-btn cancel" onclick="closeModal('deleteConfirmModal')">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.22.2/firebase-app-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.22.2/firebase-database-compat.min.js"></script>
    <script src="firebase.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/5.0.2/tesseract.min.js"></script>
    <script src="homebill.js"></script>
    <script src="billphoto.js"></script>
    <script src="report.js"></script>
     <script src="ledger.js"></script>
    <script src="profile.js"></script>
    <script src="billlist.js"></script>
    <script src="service-worker.js"></script>
   <!-- ADD THIS SPLASH SCREEN SCRIPT -->
    <script>
        // Hide splash screen and show main app after 4 seconds
        setTimeout(() => {
            document.getElementById('splash-screen').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            
            // Initialize your app after splash screen
            if (typeof initializePage === 'function') {
                initializePage();
            }
        }, 4000);
    </script>
 
</body>
</html>



